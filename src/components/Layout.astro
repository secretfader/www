---
import "../styles/site.css";
import profile from "../assets/profile.jpg";

interface Props {
    title?: string;
    description?: string;
    image?: string;
    classes?: string[];
}

const { title, description, image, classes } = Astro.props;
---

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="viewport" content="width=device-width" />
        <meta name="generator" content={Astro.generator} />
        {
            image ? (
                <meta name="og:image" content={image} />
            ) : (
                <meta name="og:image" content={profile.src} />
            )
        }
        {
            description ? (
                <meta name="description" content={description} />
            ) : (
                <meta
                    name="description"
                    content="Nicholas Young is a filmmaker, designer, engineer, and interdisciplinary artist from Colorado."
                />
            )
        }
        {
            title ? (
                <title>{title} | Nicholas Young</title>
            ) : (
                <title>Nicholas Young</title>
            )
        }
        <script>
            document.addEventListener("alpine:init", () => {
                Alpine.store("darkMode", {
                    mode: "light",

                    init() {
                        if (localStorage.theme === "dark") {
                            this.dark();
                        } else if (localStorage.theme === "light") {
                            this.light();
                        } else {
                            this.system();
                        }
                    },

                    dark() {
                        document.documentElement.classList.add("dark");
                        localStorage.theme = "dark";
                        this.mode = "dark";
                    },

                    system() {
                        if (
                            window.matchMedia("(prefers-color-scheme: dark)")
                                .matches
                        ) {
                            document.documentElement.classList.add("dark");
                        } else {
                            document.documentElement.classList.remove("dark");
                        }
                        localStorage.theme = "system";
                        this.mode = "system";
                    },

                    light() {
                        document.documentElement.classList.remove("dark");
                        localStorage.theme = "light";
                        this.mode = "light";
                    },
                });
            });
        </script>
    </head>
    <body
        class:list={["bg-natural-200", "font-geohumanist", ...(classes || [])]}
    >
        <slot />
    </body>
</html>
